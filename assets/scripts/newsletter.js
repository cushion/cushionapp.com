$(function(){return $(".js-newsletter-form").submit(function(e){var t,n,s,a,r;return e.preventDefault(),s=$(this),t=s.siblings(".js-newsletter-alert"),a=s.find(".js-newsletter-input"),n=s.find(".js-newsletter-button"),r=function(e,n){return t.removeClass("alert--positive alert--negative is-hidden"),t.addClass("alert--"+e),t.text(n)},$.ajax({type:s.attr("method"),url:s.attr("action"),data:s.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8"}).done(function(e){return"success"===e.result?r("positive",e.msg):r("negative",e.msg.replace(/(^\d \- )|( \(\#\d+\)$)/,""))}).fail(function(){return r("negative","Could not connect to the newsletter server. Please try again.")}).always(function(){return s.removeClass("is-loading"),a.prop("disabled",!1),n.prop("disabled",!1),a.val("")}),s.addClass("is-loading"),a.prop("disabled",!0),n.prop("disabled",!0)})});