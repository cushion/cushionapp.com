$(function(){return $(".js-newsletter-form").submit(function(e){var t,s,a,n,r,i;return e.preventDefault(),a=$(this),r=a.parent(),t=a.siblings(".js-newsletter-alert"),n=a.find(".js-newsletter-input"),s=a.find(".js-newsletter-button"),i=function(e,s){return t.removeClass("alert--positive alert--negative is-hidden"),t.addClass("alert--"+e),t.text(s)},$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8"}).done(function(e){var t;return e.msg=e.msg.replace(/<[^>]+.+<\/[^>]+>/,""),"success"===e.result?(t="Almost done! Please confirm your email address by clicking the link in the email we just sent you.",i("positive",t),r.addClass("is-success")):(t=e.msg.replace(/(^\d \- )|( \(\#\d+\)$)/,""),t=t.replace(" to list Cushion Updates",""),"Please enter a value"===t&&(t="Please enter a valid email address."),i("negative",t))}).fail(function(){return i("negative","Could not connect to the newsletter server. Please try again.")}).always(function(){return a.removeClass("is-loading"),n.prop("disabled",!1),s.prop("disabled",!1),n.val("")}),a.addClass("is-loading"),n.prop("disabled",!0),s.prop("disabled",!0)})});