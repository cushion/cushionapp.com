$(function(){return $(".js-newsletter-form").submit(function(e){var t,a,n,s,r;return e.preventDefault(),n=$(this),t=n.siblings(".js-newsletter-alert"),s=n.find(".js-newsletter-input"),a=n.find(".js-newsletter-button"),r=function(e,a){return t.removeClass("alert--positive alert--negative is-hidden"),t.addClass("alert--"+e),t.text(a)},$.ajax({type:n.attr("method"),url:n.attr("action"),data:n.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8"}).done(function(e){var t;return"success"===e.result?r("positive",e.msg):(t=e.msg.replace(/(^\d \- )|( \(\#\d+\)$)/,""),"Please enter a value"===t&&(t="Please enter a valid email address"),r("negative",t))}).fail(function(){return r("negative","Could not connect to the newsletter server. Please try again.")}).always(function(){return n.removeClass("is-loading"),s.prop("disabled",!1),a.prop("disabled",!1),s.val("")}),n.addClass("is-loading"),s.prop("disabled",!0),a.prop("disabled",!0)})});